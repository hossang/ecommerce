<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>상품 상세 페이지</title>
    <link rel="stylesheet" href="/css/bootstrap.css">

    <style>
        .image {
            float: left;
            margin-right: 20px;
        }
    </style>
</head>

<body>
    <!-- 헤더 -->
    <div th:replace="~{fragment/bodyHeader :: guestHeader}"></div>

    <!-- 메인 -->
    <main style="padding-top: 20px; padding-bottom: 20px;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-4 col-md-6 col-sm-8">
                    <div class="image">
                        <img th:src="|/images/${bulletinItem.storeFileName}|" width="600" height="700" class="img-fluid">
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-8">
                    <h1 th:text="${bulletinItem.name}" class="text-center"></h1>
                    <div class="contents mt-4" th:text="${bulletinItem.contents}" style="word-break: break-word;"></div>
                    <div>
                        <div th:if="${errorMessage}">
                            <p th:text="${errorMessage}" class="error-message text-danger"></p>
                        </div>
                        <div>
                            <p>가격: <span th:text="${bulletinItem.price}"></span></p>
                            <form th:if="${username}" method="post"
                                  th:action="@{/users/{username}/orders/cart(username=${username})}" class="mb-3">
                                <div class="input-group">
                                    <label for="quantity" class="input-group-text">수량:</label>
                                    <input type="number" id="quantity" name="quantity" min="1" value="1" class="form-control">
                                </div>
                                <input type="hidden" th:name="itemId" th:value="${bulletinItem.id}">
                                <button type="submit" class="btn btn-primary mt-3">구매하기</button>
                            </form>

                            <form th:if="${username == null}" method="get" action="/sign-in" class="mb-3">
                                <div class="input-group">
                                    <label for="quantity" class="input-group-text">수량:</label>
                                    <input type="number" id="quantity" name="quantity" min="1" value="1" class="form-control">
                                </div>
                                <input type="hidden" name="redirectURL" th:value="'/items/' + ${bulletinItem.id}" />
                                <button type="submit" class="btn btn-primary mt-3">구매하기</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- 푸터 -->
    <div th:replace="~{fragment/bodyFooter :: footer}"></div>
<script src="/js/bootstrap.bundle.js"></script>
</body>
</html>
